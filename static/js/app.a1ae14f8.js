(function(t){function e(e){for(var n,o,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},s={app:0},a=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"14f4":function(t,e,r){"use strict";var n=r("5d76"),s=r.n(n);s.a},1740:function(t,e,r){"use strict";var n=r("64f1"),s=r.n(n);s.a},"2e2f":function(t,e,r){},"36da":function(t,e,r){"use strict";var n=r("9e66"),s=r.n(n);s.a},"36f6":function(t,e,r){},"3f61":function(t,e,r){},"40f3":function(t,e,r){"use strict";var n=r("6ab7"),s=r.n(n);s.a},"56d7":function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"getCurrentProject",(function(){return Ht})),r.d(n,"getCurrentPage",(function(){return Jt})),r.d(n,"getStartDate",(function(){return Rt})),r.d(n,"getEndDate",(function(){return Vt})),r.d(n,"getGroup",(function(){return Wt})),r.d(n,"getQuestion",(function(){return Xt})),r.d(n,"getUser",(function(){return Zt}));var s={};r.r(s),r.d(s,"setUser",(function(){return te})),r.d(s,"setCurrentProject",(function(){return ee})),r.d(s,"setCurrentPage",(function(){return re})),r.d(s,"setStartDate",(function(){return ne})),r.d(s,"setEndDate",(function(){return se}));var a={};r.r(a),r.d(a,"setUser",(function(){return ae})),r.d(a,"setCurrentProject",(function(){return oe})),r.d(a,"setCurrentPage",(function(){return ie})),r.d(a,"setStartDate",(function(){return ce})),r.d(a,"setEndDate",(function(){return ue})),r.d(a,"setGroup",(function(){return le})),r.d(a,"setQuestion",(function(){return de}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[void 0===this.getUser.login?r("Login"):t._e(),r("Header",{class:{hidden:void 0===this.getUser.login},attrs:{project:t.project}}),r("DatePicker",{directives:[{name:"show",rawName:"v-show",value:["stat","stat_kv","stat_question"].includes(t.getCurrentPage.code),expression:"['stat', 'stat_kv', 'stat_question'].includes(getCurrentPage.code)"}],class:{hidden:void 0===this.getUser.login}}),r(t.getCurrentPageLocal,{tag:"component",staticClass:"content",class:{hidden:void 0===this.getUser.login}})],1)},c=[],u=(r("b0c0"),r("d3b7"),r("5530")),l=r("2f62"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"wrapper"},[r("label",{attrs:{for:"username"}},[t._v("Имя пользователя")]),r("input",{attrs:{type:"text",name:"username",id:"username"}}),r("label",{attrs:{for:"password"}},[t._v("Пароль")]),r("input",{attrs:{type:"password",name:"password",id:"password"}}),r("div",{staticClass:"button",on:{click:t.login}},[t._v(" Вход ")]),""!==t.error?r("div",{staticClass:"error red"},[t._v(" "+t._s(t.error)+" ")]):t._e()])},f=[],v={name:"Login",data:function(){return{error:""}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setUser","setCurrentProject","setCurrentPage"])),{},{login:function(){var t=this;fetch("login",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form"))}).then((function(t){return t.json()})).then((function(e){switch(e.status){case"True":t.setUser({name:e.name,login:e.login,project:e.project,role:e.role,group_name:e.group_name}),t.setCurrentPage({code:"stat"});break;case"Error":t.error="Ошибка: "+e.error;break;default:t.error="Неизвестная ошибка"}}))}})},p=v,m=(r("f066"),r("2877")),_=Object(m["a"])(p,d,f,!1,null,"31976610",null),h=_.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("Project",{staticClass:"project",class:{red:"mm"==t.getCurrentProject.code,pink:"mk"==t.getCurrentProject.code},attrs:{project:t.project}}),r("div",{staticClass:"nav_wrapper"},[t._l(t.getCurrentProject.menu,(function(t,e){return r("Menu",{key:e,staticClass:"nav_menu",attrs:{item:t}})})),r("div",{staticClass:"authorization nav_menu menu_button",on:{click:function(e){return t.setCurrentPage({name:"Настройки пользователя",code:"user_settings"})}}},[t._v(" "+t._s(t.getUser.name||t.getUser.login)+" ")])],2)],1)},b=[],C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"project_button"},[r("div",{staticClass:"button_wrapper",on:{click:t.menuToggle}},[r("span",{staticClass:"project_text"},[t._v(t._s(t.getCurrentProject.name))]),r("img",{attrs:{src:"#",alt:"v"}})]),r("div",{staticClass:"menu",class:{closed:!t.opened}},t._l(t.project,(function(e,n){return r("div",{key:n,staticClass:"menu_item",attrs:{item:e},on:{click:function(r){return t.setCurrentProjectLocal(e)}}},[r("img",{attrs:{src:"#",alt:"logo"}}),r("span",{staticClass:"item_text"},[t._v(t._s(e.name))])])})),0)])},j=[],y={name:"Project",props:["project"],data:function(){return{opened:!1}},computed:Object(l["c"])(["getCurrentProject"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setCurrentProject"])),{},{menuToggle:function(){this.opened=!this.opened},setCurrentProjectLocal:function(t){this.opened=!1,this.setCurrentProject(t)}})},k=y,w=(r("5771"),Object(m["a"])(k,C,j,!1,null,"6efcfa72",null)),P=w.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.checkPrivacy(t.item.privacy)?r("div",{staticClass:"menu_button"},["single"===t.item.type?r("div",{staticClass:"project_text",on:{click:function(e){return t.setCurrentPageLocal(t.item)}}},[t._v(" "+t._s(t.item.name)+" ")]):t._e(),"multiple"===t.item.type?r("div",{staticClass:"project_text",on:{click:t.menuToggle}},[t._v(" "+t._s(t.item.name)+" ")]):t._e(),"multiple"===t.item.type?r("div",{staticClass:"menu",class:{closed:!t.opened}},t._l(t.filter(t.item.submenu),(function(e,n){return r("div",{key:n,staticClass:"menu_item",attrs:{item:e},on:{click:function(r){return t.setCurrentPageLocal(e)}}},[r("span",{staticClass:"item_text"},[t._v(t._s(e.name))])])})),0):t._e()]):t._e()},D=[],x=(r("4de4"),{name:"Menu",props:["item"],data:function(){return{opened:!1}},computed:Object(l["c"])(["getUser"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setCurrentPage"])),{},{menuToggle:function(){this.opened=!this.opened},setCurrentPageLocal:function(t){this.opened=!1,this.setCurrentPage(t)},checkPrivacy:function(t){var e=0;switch(this.getUser.role){case"pret_work":e=3;break;case"pret_view":e=2;break;case"pret_captain":e=1;break;default:break}return e>=t},filter:function(t){var e=this;return t.filter((function(t){return e.checkPrivacy(t.privacy)}))}})}),S=x,E=(r("1740"),Object(m["a"])(S,O,D,!1,null,"0bd6ae91",null)),U=E.exports,q={name:"Header",props:["project","menu"],components:{Project:P,Menu:U},computed:Object(l["c"])(["getCurrentProject","getUser"]),methods:Object(l["b"])(["setCurrentPage"])},T=q,A=(r("69cf"),Object(m["a"])(T,g,b,!1,null,"30a5d383",null)),N=A.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("span",[t._v("Обязательно выберите месяц: ")]),r("select",{attrs:{id:"month"},on:{click:function(e){return t.setDate(e.target.value)}}},t._l(t.month,(function(e,n){return r("option",{key:n,attrs:{item:e},domProps:{value:n}},[t._v(" "+t._s(e)+" ")])})),0)])},M=[],F=(r("99af"),{name:"DatePicker",data:function(){return{month:{0:"Январь",1:"Февраль",2:"Март",3:"Апрель",4:"Май",5:"Июнь",6:"Июль",7:"Август",8:"Сентябрь",9:"Октябрь",10:"Ноябрь",11:"Декабрь"}}},computed:Object(l["c"])(["getStartDate","getEndDate"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setStartDate","setEndDate"])),{},{setDate:function(t){t=parseInt(t)+1;var e="".concat((new Date).getFullYear(),"-").concat(t<10?"0"+t:t,"-01");this.setStartDate(e);var r="".concat((new Date).getFullYear(),"-").concat(t<10?"0"+t:t,"-");12===t&&(t=0),r+="".concat(new Date((new Date).getFullYear(),t,0).getDate()),this.setEndDate(r)}})}),L=F,I=(r("e5c5"),Object(m["a"])(L,$,M,!1,null,"58369de4",null)),Q=I.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper_2"},[r("div",{staticClass:"total"},[r("b",[t._v("Всего ошибок: "+t._s(t.totalCount()))])]),r("div",{staticClass:"wrapper"},[r("div",{staticClass:"table"},[r("div",{staticClass:"table_row bold head"},[r("div",{staticClass:"table_cell"},[t._v("ФИО")]),r("div",{staticClass:"table_cell"},[t._v("Логин")]),t._l(t.question,(function(e,n){return r("div",{key:n,staticClass:"table_cell",attrs:{q:e}},[r("div",[t._v(t._s(e.number))]),r("div",[t._v(t._s(e.text))])])})),r("div",{staticClass:"table_cell"},[t._v("Итого")])],2),t._l(t.filterGroups(t.group),(function(e,n){return r("div",{key:n,staticClass:"table_block",attrs:{group:e}},[r("div",{staticClass:"table_row"},[r("div",{staticClass:"table_cell bold"},[t._v(t._s(e.name))]),r("div",{staticClass:"table_cell bold"},[t._v(t._s(e.summary))]),t._l(t.question,(function(t,e){return r("div",{key:e,staticClass:"table_cell noborder"})})),r("div",{staticClass:"table_cell noborder"})],2),t._l(t.filterKv(e.kv),(function(e,n){return r("div",{key:n,staticClass:"table_row",attrs:{kv:e}},[r("div",{staticClass:"table_cell sticky"},[t._v(t._s(e.name))]),r("div",{staticClass:"table_cell sticky link",on:{click:function(e){return t.redirectNumber(e)}}},[t._v(" "+t._s(e.login)+" ")]),t._l(t.question,(function(n,s){return r("div",{key:s,staticClass:"table_cell",attrs:{q:n}},[t._v(" "+t._s(e.errCountArr[n.number]||0)+" ")])})),r("div",{staticClass:"table_cell"},[t._v(t._s(e.summary))])],2)})),"pret_kv"!==t.getUser.role?r("div",{staticClass:"table_row bold"},[r("div",{staticClass:"table_cell"}),r("div",{staticClass:"table_cell"},[t._v("Итого")]),t._l(t.question,(function(n,s){return r("div",{key:s,staticClass:"table_cell",attrs:{q:n}},[r("span",{domProps:{textContent:t._s(t.groupCountByQuestion(e,n.number))}})])})),r("div",{staticClass:"table_cell"},[r("span",{domProps:{textContent:t._s(t.groupCount(e))}})])],2):t._e()],2)})),["pret_captain","pret_kv"].includes(t.getUser.role)?t._e():r("div",{staticClass:"table_row bold"},[r("div",{staticClass:"table_cell"}),r("div",{staticClass:"table_cell"},[t._v("Итого")]),t._l(t.question,(function(e,n){return r("div",{key:n,staticClass:"table_cell",attrs:{q:e}},[t._v(" "+t._s(e.summary)+" ")])})),r("div",{staticClass:"table_cell noborder"})],2)],2)])])},z=[],B=(r("07ac"),r("498a"),r("b85c")),K={name:"Statistic",data:function(){return{question:[],group:[]}},computed:Object(l["c"])(["getUser","getStartDate","getEndDate"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setCurrentPage"])),{},{fetchClaims:function(){var t=this;fetch("get_stat?user=".concat(this.getUser.login,"&start_date=").concat(this.getStartDate,"&end_date=").concat(this.getEndDate)).then((function(t){return t.json()})).then((function(e){t.group=e.group,t.question=e.question.sort((function(t,e){return t.number>e.number}));var r=function(r){var n=function(n){t.group[r].kv[n]["errCountArr"]={};var s,a=Object(B["a"])(t.question);try{var o=function(){var a=s.value,o=e.claim.filter((function(e){return e.kvName==t.group[r].kv[n].name&&e.questionNumber==a.number}));o&&(t.group[r].kv[n]["errCountArr"][a.number]=o.length)};for(a.s();!(s=a.n()).done;)o()}catch(i){a.e(i)}finally{a.f()}};for(var s in t.group[r].kv)n(s)};for(var n in t.group)r(n)}))},filterGroups:function(t){var e=this;switch(this.getUser.role){case"pret_view":case"pret_work":return t;case"pret_captain":return t.filter((function(t){return t.name===e.getUser.group_name}));default:return t.filter((function(t){return t.kv.filter((function(t){return t.login===e.getUser.login})).length}))}},filterKv:function(t){var e=this;switch(this.getUser.role){case"pret_captain":case"pret_view":case"pret_work":return t;default:return t.filter((function(t){return t.login===e.getUser.login}))}},groupCountByQuestion:function(t,e){var r,n=0,s=Object(B["a"])(t.kv);try{for(s.s();!(r=s.n()).done;){var a=r.value;n+=a.errCountArr[e]}}catch(o){s.e(o)}finally{s.f()}return n},groupCount:function(t){var e,r=0,n=Object(B["a"])(t.kv);try{for(n.s();!(e=n.n()).done;)for(var s=e.value,a=0,o=Object.values(s.errCountArr);a<o.length;a++){var i=o[a];r+=i}}catch(c){n.e(c)}finally{n.f()}return r},totalCount:function(){var t,e=0,r=Object(B["a"])(this.group);try{for(r.s();!(t=r.n()).done;){var n,s=t.value,a=Object(B["a"])(s.kv);try{for(a.s();!(n=a.n()).done;)for(var o=n.value,i=0,c=Object.values(o.errCountArr);i<c.length;i++){var u=c[i];e+=u}}catch(l){a.e(l)}finally{a.f()}}}catch(l){r.e(l)}finally{r.f()}return e},redirectNumber:function(t){this.setCurrentPage({name:"Номера анкет",type:"single",code:"claim_number",privacy:0,login:t.target.innerText.trim()})}}),mounted:function(){this.fetchClaims()},watch:{getStartDate:function(){this.fetchClaims()}}},G=K,H=(r("dd33"),Object(m["a"])(G,Y,z,!1,null,"6b257463",null)),J=H.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[t._m(0),r("tbody",t._l(t.countArr,(function(e,n){return r("tr",{key:n,attrs:{line:e}},t._l(e,(function(e,n){return r("td",{key:n,attrs:{item:e}},[t._v(" "+t._s(e)+" ")])})),0)})),0)])},V=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("ФИО")]),r("th",[t._v("Логин")]),r("th",[t._v("Всего ошибок")])])])}],W={name:"StatisticKv",data:function(){return{countArr:[]}},computed:Object(l["c"])(["getStartDate","getEndDate"]),methods:{fetchStat:function(){var t=this;fetch("stat_kv?start_date=".concat(this.getStartDate,"&end_date=").concat(this.getEndDate)).then((function(t){return t.json()})).then((function(e){return t.countArr=e}))}},mounted:function(){this.fetchStat()},watch:{getStartDate:function(){this.fetchStat()},getEndDate:function(){this.fetchStat()}}},X=W,Z=Object(m["a"])(X,R,V,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[t._m(0),r("tbody",t._l(t.countArr,(function(e,n){return r("tr",{key:n,attrs:{item:e,index:n}},[r("td",[t._v(t._s(n))]),r("td",[t._v(t._s(e))])])})),0)])},rt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Вопрос")]),r("th",[t._v("Всего ошибок")])])])}],nt={name:"StatisticQuestion",data:function(){return{countArr:{}}},computed:Object(l["c"])(["getUser","getStartDate","getEndDate"]),methods:{fetchStat:function(){var t=this;fetch("stat_question?user=".concat(this.getUser.login,"&start_date=").concat(this.getStartDate,"&end_date=").concat(this.getEndDate)).then((function(t){return t.json()})).then((function(e){return t.countArr=e}))}},mounted:function(){this.fetchStat()},watch:{getStartDate:function(){this.fetchStat()},getEndDate:function(){this.fetchStat()}}},st=nt,at=Object(m["a"])(st,et,rt,!1,null,null,null),ot=at.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[!0===t.zero?r("div",[t._v(" Нет записей ")]):t._e(),!0!==t.zero?r("table",{attrs:{cellspacing:"0"}},[t._m(0),r("tbody",t._l(t.number,(function(e,n){return r("tr",{key:n,attrs:{item:e}},[r("td",[t._v(t._s(e.number))]),r("td",[t._v(t._s(e.question))])])})),0)]):t._e()])},ct=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Номер Анкеты")]),r("th",[t._v("Вопрос")])])])}],ut={name:"ClaimNumber",data:function(){return{zero:!1,number:{}}},computed:Object(l["c"])(["getCurrentPage","getUser","getStartDate","getEndDate"]),methods:{fetchNumbers:function(){var t=this;console.log("fetching");var e=this.getCurrentPage.login?this.getCurrentPage.login:this.getUser.login;fetch("get_numbers?login=".concat(e,"&start_date=").concat(this.getStartDate,"&end_date=").concat(this.getEndDate)).then((function(t){return t.json()})).then((function(e){"zero"===e.status?t.zero=!0:t.number=e}))}},mounted:function(){this.fetchNumbers()},watch:{getStartDate:function(){this.fetchNumbers()},getEndDate:function(){this.fetchNumbers()}}},lt=ut,dt=(r("14f4"),Object(m["a"])(lt,it,ct,!1,null,"f7436a00",null)),ft=dt.exports,vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"wrapper"},[r("label",{attrs:{for:"kv_select"}},[t._v("ФИО кв: ")]),r("input",{attrs:{type:"text",id:"kv_select",list:"kv",name:"kv_name"}}),r("datalist",{attrs:{id:"kv"}},t._l(t.kvList,(function(t,e){return r("option",{key:e,domProps:{value:t.name}})})),0),r("label",{attrs:{for:"q_select"}},[t._v("Вопрос: ")]),r("input",{attrs:{type:"text",id:"q_select",list:"q",name:"question"}}),r("datalist",{attrs:{id:"q"}},t._l(t.question,(function(t,e){return r("option",{key:e,domProps:{value:t.number+". "+t.text}})})),0),r("input",{attrs:{type:"checkbox",id:"prev",name:"prev"}}),r("label",{attrs:{for:"prev"}},[t._v("Отнести к прошлому месяцу")]),r("div",[r("button",{on:{click:function(e){return t.addError(e)}}},[t._v("Добавить")]),""!==t.response?r("div",{staticClass:"response_status"},[r("span",{directives:[{name:"show",rawName:"v-show",value:"True"===t.response,expression:"response === 'True'"}],staticClass:"green"},[t._v(" Ошибка успешно добавлена ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"True"!==t.response,expression:"response !== 'True'"}],staticClass:"red"},[t._v(" Ошибка не добавлена ")])]):t._e()])])},pt=[],mt={name:"AddError",data:function(){return{question:[],kvList:[],response:""}},methods:{addError:function(t){var e=this;t.preventDefault(),fetch("write_error",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form")),credentials:"include"}).then((function(t){return t.text()})).then((function(t){e.response=t,document.getElementById("q_select").value="",setTimeout((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;t.response=""}),1e4)}))}},created:function(){var t=this;fetch("get_error_fill_data").then((function(t){return t.json()})).then((function(e){t.question=e.question,t.kvList=e.kvList}))}},_t=mt,ht=(r("6491"),Object(m["a"])(_t,vt,pt,!1,null,"08daf540",null)),gt=ht.exports,bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"wrapper"},[r("label",[t._v("Список ошибок: ")]),r("textarea",{attrs:{type:"text",id:"error_list"}}),r("input",{attrs:{type:"checkbox",id:"prev",name:"prev"}}),r("label",{attrs:{for:"prev"}},[t._v("Отнести к прошлому месяцу")]),r("div",[r("button",{on:{click:function(e){return t.addError(e)}}},[t._v("Добавить")]),""!==t.response?r("div",{staticClass:"response_status"},[r("span",{directives:[{name:"show",rawName:"v-show",value:"True"===t.response,expression:"response === 'True'"}],staticClass:"green"},[t._v(" Ошибки успешно добавлены ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"True"!==t.response,expression:"response !== 'True'"}],staticClass:"red"},[t._v(" Ошибки не добавлены ")])]):t._e()])])},Ct=[],jt=(r("d81d"),r("ac1f"),r("1276"),{name:"AddErrorMultiple",data:function(){return{response:""}},methods:{addError:function(t){var e=this;t.preventDefault();var r={error_list:document.getElementById("error_list").value.split("\n").map((function(t){var e=t.split(";");return{login:e[0].trim(),question_text:e[1].trim(),form_id:e[2].trim()}})),prev:document.getElementById("prev").checked};console.log(r),fetch("write_error_multiple",{method:"POST",mode:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"}).then((function(t){return t.text()})).then((function(t){e.response=t,setTimeout((function(){e.response=""}),1e4)}))}}}),yt=jt,kt=(r("40f3"),Object(m["a"])(yt,bt,Ct,!1,null,"2b43653d",null)),wt=kt.exports,Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",[r("label",{attrs:{for:"name"}},[t._v("ФИО")]),r("input",{attrs:{type:"text",id:"name",name:"name"}}),r("label",{attrs:{for:"username"}},[t._v("Имя пользователя")]),r("input",{attrs:{type:"text",id:"username",name:"username"}}),r("label",{attrs:{for:"group"}},[t._v("Группа")]),r("select",{attrs:{name:"group",id:"group"}},t._l(t.groups,(function(e,n){return r("option",{key:n,attrs:{group:e},domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),r("label",{attrs:{for:"role"}},[t._v("Роль")]),r("select",{attrs:{name:"role",id:"role",value:"pret_kv"}},t._l(t.roles,(function(e,n){return r("option",{key:n,attrs:{role:e},domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),r("button",{on:{click:function(e){return t.addUser(e)}}},[t._v(" Добавить ")]),""!==t.response?r("div",{staticClass:"response_status"},[r("span",{directives:[{name:"show",rawName:"v-show",value:"True"===t.response,expression:"response === 'True'"}],staticClass:"green"},[t._v(" Пользователь успешно добавлен ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"False"===t.response,expression:"response === 'False'"}],staticClass:"red"},[t._v(" Пользователь не добавлен ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"User exist"===t.response,expression:"response === 'User exist'"}],staticClass:"red"},[t._v(" Пользователь существует ")])]):t._e()])},Ot=[],Dt={name:"UserAdd",data:function(){return{groups:[],roles:["pret_kv","pret_captain","pret_view","pret_work"],response:""}},methods:{addUser:function(t){var e=this;t.preventDefault(),fetch("user_add",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form")),credentials:"include"}).then((function(t){return t.text()})).then((function(t){e.response=t,setTimeout((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;t.response=""}),1e4)}))}},created:function(){var t=this;fetch("get_groups").then((function(t){return t.json()})).then((function(e){return t.groups=e}))}},xt=Dt,St=(r("ff59"),Object(m["a"])(xt,Pt,Ot,!1,null,"402729e8",null)),Et=St.exports,Ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[t.result!=={}?r("div",{staticClass:"result_wrapper"},[void 0!==t.result.unneeded?r("div",{staticClass:"red unneeded"},[r("div",[t._v("Неиспользуемые логины:")]),t._l(t.result.unneeded,(function(e,n){return r("div",{key:n,staticClass:"black",attrs:{item:e}},[t._v(" "+t._s(e)+" ")])}))],2):t._e(),void 0!==t.result.needed?r("div",{staticClass:"green needed"},[r("div",[t._v("Отсутствующие логины:")]),t._l(t.result.needed,(function(e,n){return r("div",{key:n,staticClass:"black",attrs:{item:e}},[t._v(" "+t._s(e)+" ")])}))],2):t._e()]):t._e(),r("button",{on:{click:t.check}},[t._v(" Проверить ")]),t._m(0)])},qt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input_wrapper"},[r("label",{attrs:{for:"list"}},[t._v("Список логинов:")]),r("textarea",{attrs:{name:"list",id:"list"}})])}],Tt=(r("caad"),r("2532"),{name:"UserCheck",data:function(){return{result:{},login:[]}},created:function(){var t=this;fetch("get_login").then((function(t){return t.json()})).then((function(e){return t.login=e}))},methods:{check:function(){var t,e=document.getElementById("list").value.split("\n"),r=Object(B["a"])(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.login.includes(n)||(void 0===this.result.needed&&(this.result.needed=[]),this.result.needed.push(n))}}catch(i){r.e(i)}finally{r.f()}var s,a=Object(B["a"])(this.login);try{for(a.s();!(s=a.n()).done;){var o=s.value;e.includes(o)||(void 0===this.result.unneeded&&(this.result.unneeded=[]),this.result.unneeded.push(o))}}catch(i){a.e(i)}finally{a.f()}this.$forceUpdate()}}}),At=Tt,Nt=(r("c174"),Object(m["a"])(At,Ut,qt,!1,null,"0bf3722d",null)),$t=Nt.exports,Mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"wrapper"},[r("div",{staticClass:"logout",on:{click:t.logout}},[t._v(" Выйти ")]),t._m(0),r("button",{on:{click:t.updateUserInfo}},[t._v(" Сохранить ")]),""!==t.response?r("div",{staticClass:"response_status"},[r("span",{directives:[{name:"show",rawName:"v-show",value:"True"===t.response,expression:"response === 'True'"}],staticClass:"green"},[t._v(" Информация обновлена ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"False"===t.response,expression:"response === 'False'"}],staticClass:"red"},[t._v(" Ошибка: "+t._s(t.response)+" ")])]):t._e()])},Ft=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"field_wrapper"},[r("label",{attrs:{for:"password"}},[t._v("Пароль")]),r("input",{attrs:{type:"password",name:"password",id:"password"}})])}],Lt={name:"UserSettengs",data:function(){return{response:""}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setUser"])),{},{updateUserInfo:function(){var t=this;fetch("update_user_info",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form")),credentials:"include"}).then((function(t){return t.text()})).then((function(e){t.response=e,setTimeout((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;e.response=""}),1e4)}))},logout:function(){var t=this;fetch("site_logout").then((function(t){return t.text()})).then((function(e){"True"===e&&t.setUser({})}))}})},It=Lt,Qt=(r("f4d6"),Object(m["a"])(It,Mt,Ft,!1,null,"d74c0532",null)),Yt=Qt.exports,zt={name:"App",data:function(){return{project:[{code:"mk",name:"Магнит Косметик",menu:[{name:"Статистика",type:"multiple",privacy:0,submenu:[{code:"stat",name:"Общая",privacy:0},{code:"stat_kv",name:"Статистика по КВ",privacy:2},{code:"stat_question",name:"Статистика по вопросам",privacy:2}]},{name:"Номера анкет",type:"single",code:"claim_number",privacy:0},{name:"Добавить ошибку",type:"single",code:"add_error",privacy:2},{name:"Добавить ошибки списком",type:"single",code:"add_error_multiple",privacy:2},{name:"Пользователь",type:"multiple",privacy:3,submenu:[{name:"Добавить пользователя",code:"user_add",privacy:3},{name:"Сверка",code:"user_check",privacy:3}]}]}]}},components:{Login:h,Header:N,DatePicker:Q,Statistic:J,StatisticKv:tt,StatisticQuestion:ot,ClaimNumber:ft,AddError:gt,AddErrorMultiple:wt,UserAdd:Et,UserCheck:$t,UserSettings:Yt},computed:Object(u["a"])(Object(u["a"])({},Object(l["c"])(["getCurrentPage","getUser"])),{},{getCurrentPageLocal:function(){switch(this.getCurrentPage.code){case"start":case"stat":return"Statistic";case"stat_kv":return"StatisticKv";case"stat_question":return"StatisticQuestion";case"claim_number":return"ClaimNumber";case"add_error":return"AddError";case"add_error_multiple":return"AddErrorMultiple";case"user_add":return"UserAdd";case"user_check":return"UserCheck";case"user_settings":return"UserSettings";default:return"Statistic"}}}),methods:Object(l["b"])(["setCurrentProject","setUser","setCurrentPage"]),created:function(){},mounted:function(){var t=this;fetch("login",{method:"POST",mode:"same-origin",credentials:"include"}).then((function(t){return t.json()})).then((function(e){"True"===e.status&&(t.setUser({name:e.name,login:e.login,project:e.project,role:e.role,group_name:e.group_name}),t.setCurrentPage({code:"stat"}))})),this.setCurrentProject(this.project[0])}},Bt=zt,Kt=(r("36da"),Object(m["a"])(Bt,i,c,!1,null,null,null)),Gt=Kt.exports,Ht=function(t){return t.currentProject},Jt=function(t){return t.currentPage},Rt=function(t){if(""!=t.startDate)return t.startDate;var e=new Date,r=e.getFullYear()+"-";if(e.getMonth()<9){var n=e.getMonth()+1;r+="0"+n}else r+=e.getMonth();return r+="-01",r},Vt=function(t){if(""!=t.endDate)return t.endDate;var e=new Date,r="";r=e.getMonth()<=10?new Date(e.getFullYear(),e.getMonth()+1,0):new Date(e.getFullYear(),0,0);var n=r.getFullYear()+"-";if(r.getMonth()<9){var s=r.getMonth()+1;n+="0"+s}else n+=r.getMonth();return n+="-"+r.getDate(),n},Wt=function(t){return t.group},Xt=function(t){return t.question},Zt=function(t){return t.user},te=function(t,e){var r=t.commit;return r("setUser",e)},ee=function(t,e){var r=t.commit;return r("setCurrentProject",e)},re=function(t,e){var r=t.commit;return r("setCurrentPage",e)},ne=function(t,e){var r=t.commit;return r("setStartDate",e)},se=function(t,e){var r=t.commit;return r("setEndDate",e)},ae=function(t,e){return o["a"].set(t,"user",e)},oe=function(t,e){return o["a"].set(t,"currentProject",e)},ie=function(t,e){return o["a"].set(t,"currentPage",e)},ce=function(t,e){return o["a"].set(t,"startDate",e)},ue=function(t,e){return o["a"].set(t,"endDate",e)},le=function(t,e){return o["a"].set(t,"group",e)},de=function(t,e){return o["a"].set(t,"question",e)};o["a"].use(l["a"]);var fe=new l["a"].Store({state:{currentProject:{code:"",name:"",menu:{}},user:{},currentPage:"",startDate:"",endDate:""},getters:Object(u["a"])({},n),mutations:Object(u["a"])({},a),actions:Object(u["a"])({},s),modules:{}});o["a"].config.productionTip=!0,new o["a"]({store:fe,render:function(t){return t(Gt)}}).$mount("#app")},5771:function(t,e,r){"use strict";var n=r("36f6"),s=r.n(n);s.a},"5d76":function(t,e,r){},6491:function(t,e,r){"use strict";var n=r("2e2f"),s=r.n(n);s.a},"64f1":function(t,e,r){},"69cf":function(t,e,r){"use strict";var n=r("ee66"),s=r.n(n);s.a},"6ab7":function(t,e,r){},"721b":function(t,e,r){},"8da4":function(t,e,r){},"9e66":function(t,e,r){},aebc:function(t,e,r){},c174:function(t,e,r){"use strict";var n=r("eec0"),s=r.n(n);s.a},d5a0:function(t,e,r){},dd33:function(t,e,r){"use strict";var n=r("aebc"),s=r.n(n);s.a},e5c5:function(t,e,r){"use strict";var n=r("8da4"),s=r.n(n);s.a},ee66:function(t,e,r){},eec0:function(t,e,r){},f066:function(t,e,r){"use strict";var n=r("721b"),s=r.n(n);s.a},f4d6:function(t,e,r){"use strict";var n=r("3f61"),s=r.n(n);s.a},ff59:function(t,e,r){"use strict";var n=r("d5a0"),s=r.n(n);s.a}});
//# sourceMappingURL=app.a1ae14f8.js.map