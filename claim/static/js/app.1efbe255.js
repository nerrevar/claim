(function(t){function e(e){for(var r,o,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1740:function(t,e,n){"use strict";var r=n("64f1"),s=n.n(r);s.a},"2e2f":function(t,e,n){},"36da":function(t,e,n){"use strict";var r=n("9e66"),s=n.n(r);s.a},"36f6":function(t,e,n){},"3e4f":function(t,e,n){},"3f61":function(t,e,n){},"45ee":function(t,e,n){"use strict";var r=n("bed2"),s=n.n(r);s.a},"4a99":function(t,e,n){"use strict";var r=n("8174"),s=n.n(r);s.a},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getCurrentProject",(function(){return At})),n.d(r,"getCurrentPage",(function(){return Lt})),n.d(r,"getStartDate",(function(){return Mt})),n.d(r,"getEndDate",(function(){return Nt})),n.d(r,"getGroup",(function(){return Ft})),n.d(r,"getQuestion",(function(){return Qt})),n.d(r,"getUser",(function(){return Kt}));var s={};n.r(s),n.d(s,"setUser",(function(){return Bt})),n.d(s,"setCurrentProject",(function(){return Gt})),n.d(s,"setCurrentPage",(function(){return It})),n.d(s,"setStartDate",(function(){return Ht})),n.d(s,"setEndDate",(function(){return Yt}));var a={};n.r(a),n.d(a,"setUser",(function(){return Jt})),n.d(a,"setCurrentProject",(function(){return zt})),n.d(a,"setCurrentPage",(function(){return Rt})),n.d(a,"setStartDate",(function(){return Vt})),n.d(a,"setEndDate",(function(){return Wt})),n.d(a,"setGroup",(function(){return Xt})),n.d(a,"setQuestion",(function(){return Zt}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[void 0===this.getUser.login?n("Login"):t._e(),n("Header",{class:{hidden:void 0===this.getUser.login},attrs:{project:t.project}}),n("DatePicker",{directives:[{name:"show",rawName:"v-show",value:["stat","stat_kv","stat_question"].includes(t.getCurrentPage.code),expression:"['stat', 'stat_kv', 'stat_question'].includes(getCurrentPage.code)"}],class:{hidden:void 0===this.getUser.login}}),n(t.getCurrentPageLocal,{tag:"component",staticClass:"content",class:{hidden:void 0===this.getUser.login}})],1)},c=[],u=(n("b0c0"),n("d3b7"),n("5530")),l=n("2f62"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"wrapper"},[n("label",{attrs:{for:"username"}},[t._v("Имя пользователя")]),n("input",{attrs:{type:"text",name:"username",id:"username"}}),n("label",{attrs:{for:"password"}},[t._v("Пароль")]),n("input",{attrs:{type:"password",name:"password",id:"password"}}),n("div",{staticClass:"button",on:{click:t.login}},[t._v(" Вход ")]),""!==t.error?n("div",{staticClass:"error red"},[t._v(" "+t._s(t.error)+" ")]):t._e()])},f=[],v={name:"Login",data:function(){return{error:""}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setUser","setCurrentProject","setCurrentPage"])),{},{login:function(){var t=this;fetch("login",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form"))}).then((function(t){return t.json()})).then((function(e){switch(e.status){case"True":t.setUser({name:e.name,login:e.login,project:e.project,role:e.role}),t.setCurrentPage({code:"stat"});break;case"Error":t.error="Ошибка: "+e.error;break;default:t.error="Неизвестная ошибка"}}))}})},p=v,_=(n("b82f"),n("2877")),m=Object(_["a"])(p,d,f,!1,null,"fceb742e",null),h=m.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("Project",{staticClass:"project",class:{red:"mm"==t.getCurrentProject.code,pink:"mk"==t.getCurrentProject.code},attrs:{project:t.project}}),n("div",{staticClass:"nav_wrapper"},[t._l(t.getCurrentProject.menu,(function(t,e){return n("Menu",{key:e,staticClass:"nav_menu",attrs:{item:t}})})),n("div",{staticClass:"authorization nav_menu menu_button",on:{click:function(e){return t.setCurrentPage({name:"Настройки пользователя",code:"user_settings"})}}},[t._v(" "+t._s(t.getUser.name||t.getUser.login)+" ")])],2)],1)},b=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"project_button"},[n("div",{staticClass:"button_wrapper",on:{click:t.menuToggle}},[n("span",{staticClass:"project_text"},[t._v(t._s(t.getCurrentProject.name))]),n("img",{attrs:{src:"#",alt:"v"}})]),n("div",{staticClass:"menu",class:{closed:!t.opened}},t._l(t.project,(function(e,r){return n("div",{key:r,staticClass:"menu_item",attrs:{item:e},on:{click:function(n){return t.setCurrentProjectLocal(e)}}},[n("img",{attrs:{src:"#",alt:"logo"}}),n("span",{staticClass:"item_text"},[t._v(t._s(e.name))])])})),0)])},j=[],k={name:"Project",props:["project"],data:function(){return{opened:!1}},computed:Object(l["c"])(["getCurrentProject"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setCurrentProject"])),{},{menuToggle:function(){this.opened=!this.opened},setCurrentProjectLocal:function(t){this.opened=!1,this.setCurrentProject(t)}})},y=k,w=(n("5771"),Object(_["a"])(y,C,j,!1,null,"6efcfa72",null)),P=w.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.checkPrivacy(t.item.privacy)?n("div",{staticClass:"menu_button"},["single"===t.item.type?n("div",{staticClass:"project_text",on:{click:function(e){return t.setCurrentPageLocal(t.item)}}},[t._v(" "+t._s(t.item.name)+" ")]):t._e(),"multiple"===t.item.type?n("div",{staticClass:"project_text",on:{click:t.menuToggle}},[t._v(" "+t._s(t.item.name)+" ")]):t._e(),"multiple"===t.item.type?n("div",{staticClass:"menu",class:{closed:!t.opened}},t._l(t.filter(t.item.submenu),(function(e,r){return n("div",{key:r,staticClass:"menu_item",attrs:{item:e},on:{click:function(n){return t.setCurrentPageLocal(e)}}},[n("span",{staticClass:"item_text"},[t._v(t._s(e.name))])])})),0):t._e()]):t._e()},D=[],S=(n("4de4"),{name:"Menu",props:["item"],data:function(){return{opened:!1}},computed:Object(l["c"])(["getUser"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setCurrentPage"])),{},{menuToggle:function(){this.opened=!this.opened},setCurrentPageLocal:function(t){this.opened=!1,this.setCurrentPage(t)},checkPrivacy:function(t){var e=0;switch(this.getUser.role){case"pret_work":e=3;break;case"pret_view":e=2;break;case"pret_captain":e=1;break;default:break}return e>=t},filter:function(t){var e=this;return t.filter((function(t){return e.checkPrivacy(t.privacy)}))}})}),x=S,U=(n("1740"),Object(_["a"])(x,O,D,!1,null,"0bd6ae91",null)),E=U.exports,q={name:"Header",props:["project","menu"],components:{Project:P,Menu:E},computed:Object(l["c"])(["getCurrentProject","getUser"]),methods:Object(l["b"])(["setCurrentPage"])},T=q,$=(n("69cf"),Object(_["a"])(T,g,b,!1,null,"30a5d383",null)),A=$.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("label",{attrs:{for:"start_date"}},[t._v("Начальная дата")]),n("input",{attrs:{type:"date",id:"start_date"},domProps:{value:t.getStartDate},on:{change:function(e){return t.setStartDate(e.target.value)}}}),n("label",{attrs:{for:"end_date"}},[t._v("Конечная дата")]),n("input",{attrs:{type:"date",id:"end_date"},domProps:{value:t.getEndDate},on:{change:function(e){return t.setEndDate(e.target.value)}}})])},M=[],N={name:"DatePicker",computed:Object(l["c"])(["getStartDate","getEndDate"]),methods:Object(l["b"])(["setStartDate","setEndDate"])},F=N,Q=(n("4a99"),Object(_["a"])(F,L,M,!1,null,"37c26dd8",null)),K=Q.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"table"},[n("div",{staticClass:"table_row bold head"},[n("div",{staticClass:"table_cell"},[t._v("ФИО")]),n("div",{staticClass:"table_cell"},[t._v("Логин")]),t._l(t.question,(function(e,r){return n("div",{key:r,staticClass:"table_cell",attrs:{q:e}},[n("div",[t._v(t._s(e.number))]),n("div",[t._v(t._s(e.text))])])})),n("div",{staticClass:"table_cell"},[t._v("Итого")])],2),t._l(t.filterGroups(t.group),(function(e,r){return n("div",{key:r,staticClass:"table_block",attrs:{group:e}},[n("div",{staticClass:"table_row"},[n("div",{staticClass:"table_cell bold"},[t._v(t._s(e.name))]),n("div",{staticClass:"table_cell bold"},[t._v(t._s(e.summary))]),t._l(t.question,(function(t,e){return n("div",{key:e,staticClass:"table_cell noborder"})})),n("div",{staticClass:"table_cell noborder"})],2),t._l(t.filterKv(e.kv),(function(e,r){return n("div",{key:r,staticClass:"table_row",attrs:{kv:e}},[n("div",{staticClass:"table_cell sticky"},[t._v(t._s(e.name))]),n("div",{staticClass:"table_cell sticky"},[t._v(t._s(e.login))]),t._l(t.question,(function(r,s){return n("div",{key:s,staticClass:"table_cell",attrs:{q:r}},[t._v(" "+t._s(e.errCountArr[r.number]||0)+" ")])})),n("div",{staticClass:"table_cell"},[t._v(t._s(e.summary))])],2)})),"pret_kv"!==t.getUser.role?n("div",{staticClass:"table_row bold"},[n("div",{staticClass:"table_cell"}),n("div",{staticClass:"table_cell"},[t._v("Итого")]),t._l(t.question,(function(r,s){return n("div",{key:s,staticClass:"table_cell",attrs:{q:r}},[n("span",{domProps:{textContent:t._s(t.groupCountByQuestion(e,r.number))}})])})),n("div",{staticClass:"table_cell"},[n("span",{domProps:{textContent:t._s(t.groupCount(e))}})])],2):t._e()],2)})),["pret_captain","pret_kv"].includes(t.getUser.role)?t._e():n("div",{staticClass:"table_row bold"},[n("div",{staticClass:"table_cell"}),n("div",{staticClass:"table_cell"},[t._v("Итого")]),t._l(t.question,(function(e,r){return n("div",{key:r,staticClass:"table_cell",attrs:{q:e}},[t._v(" "+t._s(e.summary)+" ")])})),n("div",{staticClass:"table_cell noborder"})],2)],2)])},G=[],I=(n("99af"),n("07ac"),n("b85c")),H={name:"Statistic",data:function(){return{question:[],group:[],captain:[]}},computed:Object(l["c"])(["getUser","getStartDate","getEndDate"]),methods:{fetchClaims:function(){var t=this;fetch("get_stat?user=".concat(this.getUser.login,"&start_date=").concat(this.getStartDate,"&end_date=").concat(this.getEndDate)).then((function(t){return t.json()})).then((function(e){t.group=e.group,t.question=e.question,t.captain=e.captain;var n=function(n){var r=function(r){t.group[n].kv[r]["errCountArr"]={};var s,a=Object(I["a"])(t.question);try{var o=function(){var a=s.value,o=e.claim.filter((function(e){return e.kvName==t.group[n].kv[r].name&&e.questionNumber==a.number}));o&&(t.group[n].kv[r]["errCountArr"][a.number]=o.length)};for(a.s();!(s=a.n()).done;)o()}catch(i){a.e(i)}finally{a.f()}};for(var s in t.group[n].kv)r(s)};for(var r in t.group)n(r)}))},filterGroups:function(t){var e=this;switch(this.getUser.role){case"pret_view":case"pret_work":return t;case"pret_captain":return t.filter((function(t){return t.name===e.captain.filter((function(t){return t.captainName===e.getUser.name}))[0].groupName}));default:return t.filter((function(t){return t.kv.filter((function(t){return t.login===e.getUser.login})).length}))}},filterKv:function(t){var e=this;switch(this.getUser.role){case"pret_captain":case"pret_view":case"pret_work":return t;default:return t.filter((function(t){return t.login===e.getUser.login}))}},groupCountByQuestion:function(t,e){var n,r=0,s=Object(I["a"])(t.kv);try{for(s.s();!(n=s.n()).done;){var a=n.value;r+=a.errCountArr[e]}}catch(o){s.e(o)}finally{s.f()}return r},groupCount:function(t){var e,n=0,r=Object(I["a"])(t.kv);try{for(r.s();!(e=r.n()).done;)for(var s=e.value,a=0,o=Object.values(s.errCountArr);a<o.length;a++){var i=o[a];n+=i}}catch(c){r.e(c)}finally{r.f()}return n}},mounted:function(){this.fetchClaims()},watch:{getStartDate:function(){this.fetchClaims()},getEndDate:function(){this.fetchClaims()}}},Y=H,J=(n("45ee"),Object(_["a"])(Y,B,G,!1,null,"39dafaa8",null)),z=J.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",[t._m(0),n("tbody",t._l(t.countArr,(function(e,r){return n("tr",{key:r,attrs:{line:e}},t._l(e,(function(e,r){return n("td",{key:r,attrs:{item:e}},[t._v(" "+t._s(e)+" ")])})),0)})),0)])},V=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("ФИО")]),n("th",[t._v("Логин")]),n("th",[t._v("Всего ошибок")])])])}],W={name:"StatisticKv",data:function(){return{countArr:[]}},computed:Object(l["c"])(["getStartDate","getEndDate"]),methods:{fetchStat:function(){var t=this;fetch("stat_kv?start_date=".concat(this.getStartDate,"&end_date=").concat(this.getEndDate)).then((function(t){return t.json()})).then((function(e){return t.countArr=e}))}},mounted:function(){this.fetchStat()},watch:{getStartDate:function(){this.fetchStat()},getEndDate:function(){this.fetchStat()}}},X=W,Z=Object(_["a"])(X,R,V,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",[t._m(0),n("tbody",t._l(t.countArr,(function(e,r){return n("tr",{key:r,attrs:{item:e,index:r}},[n("td",[t._v(t._s(r))]),n("td",[t._v(t._s(e))])])})),0)])},nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Вопрос")]),n("th",[t._v("Всего ошибок")])])])}],rt={name:"StatisticQuestion",data:function(){return{countArr:{}}},computed:Object(l["c"])(["getUser","getStartDate","getEndDate"]),methods:{fetchStat:function(){var t=this;fetch("stat_question?user=".concat(this.getUser.login,"&start_date=").concat(this.getStartDate,"&end_date=").concat(this.getEndDate)).then((function(t){return t.json()})).then((function(e){return t.countArr=e}))}},mounted:function(){this.fetchStat()},watch:{getStartDate:function(){this.fetchStat()},getEndDate:function(){this.fetchStat()}}},st=rt,at=Object(_["a"])(st,et,nt,!1,null,null,null),ot=at.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"wrapper"},[n("label",{attrs:{for:"kv_select"}},[t._v("ФИО кв: ")]),n("input",{attrs:{type:"text",id:"kv_select",list:"kv",name:"kv_name"}}),n("datalist",{attrs:{id:"kv"}},t._l(t.kvList,(function(t,e){return n("option",{key:e,domProps:{value:t.name}})})),0),n("label",{attrs:{for:"q_select"}},[t._v("Вопрос: ")]),n("input",{attrs:{type:"text",id:"q_select",list:"q",name:"question"}}),n("datalist",{attrs:{id:"q"}},t._l(t.question,(function(t,e){return n("option",{key:e,domProps:{value:t.number+". "+t.text}})})),0),n("input",{attrs:{type:"checkbox",id:"prev",name:"prev"}}),n("label",{attrs:{for:"prev"}},[t._v("Отнести к прошлому месяцу")]),n("div",[n("button",{on:{click:function(e){return t.addError(e)}}},[t._v("Добавить")]),""!==t.response?n("div",{staticClass:"response_status"},[n("span",{directives:[{name:"show",rawName:"v-show",value:"True"===t.response,expression:"response === 'True'"}],staticClass:"green"},[t._v(" Ошибка успешно добавлена ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"True"!==t.response,expression:"response !== 'True'"}],staticClass:"red"},[t._v(" Ошибка не добавлена ")])]):t._e()])])},ct=[],ut={name:"AddError",data:function(){return{question:[],kvList:[],response:""}},methods:{addError:function(t){var e=this;t.preventDefault(),fetch("write_error",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form")),credentials:"include"}).then((function(t){return t.text()})).then((function(t){e.response=t,document.getElementById("q_select").value="",setTimeout((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;t.response=""}),1e4)}))}},created:function(){var t=this;fetch("get_error_fill_data").then((function(t){return t.json()})).then((function(e){t.question=e.question,t.kvList=e.kvList}))}},lt=ut,dt=(n("6491"),Object(_["a"])(lt,it,ct,!1,null,"08daf540",null)),ft=dt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[n("label",{attrs:{for:"name"}},[t._v("ФИО")]),n("input",{attrs:{type:"text",id:"name",name:"name"}}),n("label",{attrs:{for:"username"}},[t._v("Имя пользователя")]),n("input",{attrs:{type:"text",id:"username",name:"username"}}),n("label",{attrs:{for:"group"}},[t._v("Группа")]),n("select",{attrs:{name:"group",id:"group"}},t._l(t.groups,(function(e,r){return n("option",{key:r,attrs:{group:e},domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),n("label",{attrs:{for:"role"}},[t._v("Роль")]),n("select",{attrs:{name:"role",id:"role",value:"pret_kv"}},t._l(t.roles,(function(e,r){return n("option",{key:r,attrs:{role:e},domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),n("button",{on:{click:function(e){return t.addUser(e)}}},[t._v(" Добавить ")]),""!==t.response?n("div",{staticClass:"response_status"},[n("span",{directives:[{name:"show",rawName:"v-show",value:"True"===t.response,expression:"response === 'True'"}],staticClass:"green"},[t._v(" Пользователь успешно добавлен ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"False"===t.response,expression:"response === 'False'"}],staticClass:"red"},[t._v(" Пользователь не добавлен ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"User exist"===t.response,expression:"response === 'User exist'"}],staticClass:"red"},[t._v(" Пользователь существует ")])]):t._e()])},pt=[],_t={name:"UserAdd",data:function(){return{groups:[],roles:["pret_kv","pret_captain","pret_view","pret_work"],response:""}},methods:{addUser:function(t){var e=this;t.preventDefault(),fetch("user_add",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form")),credentials:"include"}).then((function(t){return t.text()})).then((function(t){e.response=t,setTimeout((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;t.response=""}),1e4)}))}},created:function(){var t=this;fetch("get_groups").then((function(t){return t.json()})).then((function(e){return t.groups=e}))}},mt=_t,ht=(n("ff59"),Object(_["a"])(mt,vt,pt,!1,null,"402729e8",null)),gt=ht.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[t.result!=={}?n("div",{staticClass:"result_wrapper"},[void 0!==t.result.unneeded?n("div",{staticClass:"red unneeded"},[n("div",[t._v("Неиспользуемые логины:")]),t._l(t.result.unneeded,(function(e,r){return n("div",{key:r,staticClass:"black",attrs:{item:e}},[t._v(" "+t._s(e)+" ")])}))],2):t._e(),void 0!==t.result.needed?n("div",{staticClass:"green needed"},[n("div",[t._v("Отсутствующие логины:")]),t._l(t.result.needed,(function(e,r){return n("div",{key:r,staticClass:"black",attrs:{item:e}},[t._v(" "+t._s(e)+" ")])}))],2):t._e()]):t._e(),n("button",{on:{click:t.check}},[t._v(" Проверить ")]),t._m(0)])},Ct=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input_wrapper"},[n("label",{attrs:{for:"list"}},[t._v("Список логинов:")]),n("textarea",{attrs:{name:"list",id:"list"}})])}],jt=(n("caad"),n("ac1f"),n("2532"),n("1276"),{name:"UserCheck",data:function(){return{result:{},login:[]}},created:function(){var t=this;fetch("get_login").then((function(t){return t.json()})).then((function(e){return t.login=e}))},methods:{check:function(){var t,e=document.getElementById("list").value.split("\n"),n=Object(I["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.login.includes(r)||(void 0===this.result.needed&&(this.result.needed=[]),this.result.needed.push(r))}}catch(i){n.e(i)}finally{n.f()}var s,a=Object(I["a"])(this.login);try{for(a.s();!(s=a.n()).done;){var o=s.value;e.includes(o)||(void 0===this.result.unneeded&&(this.result.unneeded=[]),this.result.unneeded.push(o))}}catch(i){a.e(i)}finally{a.f()}this.$forceUpdate()}}}),kt=jt,yt=(n("c174"),Object(_["a"])(kt,bt,Ct,!1,null,"0bf3722d",null)),wt=yt.exports,Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"wrapper"},[n("div",{staticClass:"logout",on:{click:t.logout}},[t._v(" Выйти ")]),t._m(0),n("button",{on:{click:t.updateUserInfo}},[t._v(" Сохранить ")]),""!==t.response?n("div",{staticClass:"response_status"},[n("span",{directives:[{name:"show",rawName:"v-show",value:"True"===t.response,expression:"response === 'True'"}],staticClass:"green"},[t._v(" Информация обновлена ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"False"===t.response,expression:"response === 'False'"}],staticClass:"red"},[t._v(" Ошибка: "+t._s(t.response)+" ")])]):t._e()])},Ot=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field_wrapper"},[n("label",{attrs:{for:"password"}},[t._v("Пароль")]),n("input",{attrs:{type:"password",name:"password",id:"password"}})])}],Dt={name:"UserSettengs",data:function(){return{response:""}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["setUser"])),{},{updateUserInfo:function(){var t=this;fetch("update_user_info",{method:"POST",mode:"same-origin",body:new FormData(document.querySelector("form")),credentials:"include"}).then((function(t){return t.text()})).then((function(e){t.response=e,setTimeout((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;e.response=""}),1e4)}))},logout:function(){var t=this;fetch("site_logout").then((function(t){return t.text()})).then((function(e){"True"===e&&t.setUser({})}))}})},St=Dt,xt=(n("f4d6"),Object(_["a"])(St,Pt,Ot,!1,null,"d74c0532",null)),Ut=xt.exports,Et={name:"App",data:function(){return{project:[{code:"mk",name:"Магнит Косметик",menu:[{name:"Статистика",type:"multiple",privacy:0,submenu:[{code:"stat",name:"Общая",privacy:0},{code:"stat_kv",name:"Статистика по КВ",privacy:1},{code:"stat_question",name:"Статистика по вопросам",privacy:1}]},{name:"Добавить ошибку",type:"single",code:"add_error",privacy:2},{name:"Пользователь",type:"multiple",privacy:3,submenu:[{name:"Добавить пользователя",code:"user_add",privacy:3},{name:"Сверка",code:"user_check",privacy:3}]}]}]}},components:{Login:h,Header:A,DatePicker:K,Statistic:z,StatisticKv:tt,StatisticQuestion:ot,AddError:ft,UserAdd:gt,UserCheck:wt,UserSettings:Ut},computed:Object(u["a"])(Object(u["a"])({},Object(l["c"])(["getCurrentPage","getUser"])),{},{getCurrentPageLocal:function(){switch(this.getCurrentPage.code){case"start":case"stat":return"Statistic";case"stat_kv":return"StatisticKv";case"stat_question":return"StatisticQuestion";case"add_error":return"AddError";case"user_add":return"UserAdd";case"user_check":return"UserCheck";case"user_settings":return"UserSettings";default:return"Statistic"}}}),methods:Object(l["b"])(["setCurrentProject","setUser","setCurrentPage"]),created:function(){},mounted:function(){var t=this;fetch("login",{method:"POST",mode:"same-origin",credentials:"include"}).then((function(t){return t.json()})).then((function(e){"True"===e.status&&(t.setUser({name:e.name,login:e.login,project:e.project,role:e.role}),t.setCurrentPage({code:"start"}))})),this.setCurrentProject(this.project[0])}},qt=Et,Tt=(n("36da"),Object(_["a"])(qt,i,c,!1,null,null,null)),$t=Tt.exports,At=function(t){return t.currentProject},Lt=function(t){return t.currentPage},Mt=function(t){if(""!=t.startDate)return t.startDate;var e=new Date,n=e.getFullYear()+"-";if(e.getMonth()<9){var r=e.getMonth()+1;n+="0"+r}else n+=e.getMonth();return n+="-01",n},Nt=function(t){if(""!=t.endDate)return t.endDate;var e=new Date,n=new Date(e.getFullYear(),e.getMonth()+1,0),r=n.getFullYear()+"-";if(n.getMonth()<9){var s=n.getMonth()+1;r+="0"+s}else r+=n.getMonth();return r+="-"+n.getDate(),r},Ft=function(t){return t.group},Qt=function(t){return t.question},Kt=function(t){return t.user},Bt=function(t,e){var n=t.commit;return n("setUser",e)},Gt=function(t,e){var n=t.commit;return n("setCurrentProject",e)},It=function(t,e){var n=t.commit;return n("setCurrentPage",e)},Ht=function(t,e){var n=t.commit;return n("setStartDate",e)},Yt=function(t,e){var n=t.commit;return n("setEndDate",e)},Jt=function(t,e){return o["a"].set(t,"user",e)},zt=function(t,e){return o["a"].set(t,"currentProject",e)},Rt=function(t,e){return o["a"].set(t,"currentPage",e)},Vt=function(t,e){return o["a"].set(t,"startDate",e)},Wt=function(t,e){return o["a"].set(t,"endDate",e)},Xt=function(t,e){return o["a"].set(t,"group",e)},Zt=function(t,e){return o["a"].set(t,"question",e)};o["a"].use(l["a"]);var te=new l["a"].Store({state:{currentProject:{code:"",name:"",menu:{}},user:{},currentPage:"",startDate:"",endDate:""},getters:Object(u["a"])({},r),mutations:Object(u["a"])({},a),actions:Object(u["a"])({},s),modules:{}});o["a"].config.productionTip=!0,new o["a"]({store:te,render:function(t){return t($t)}}).$mount("#app")},5771:function(t,e,n){"use strict";var r=n("36f6"),s=n.n(r);s.a},6491:function(t,e,n){"use strict";var r=n("2e2f"),s=n.n(r);s.a},"64f1":function(t,e,n){},"69cf":function(t,e,n){"use strict";var r=n("ee66"),s=n.n(r);s.a},8174:function(t,e,n){},"9e66":function(t,e,n){},b82f:function(t,e,n){"use strict";var r=n("3e4f"),s=n.n(r);s.a},bed2:function(t,e,n){},c174:function(t,e,n){"use strict";var r=n("eec0"),s=n.n(r);s.a},d5a0:function(t,e,n){},ee66:function(t,e,n){},eec0:function(t,e,n){},f4d6:function(t,e,n){"use strict";var r=n("3f61"),s=n.n(r);s.a},ff59:function(t,e,n){"use strict";var r=n("d5a0"),s=n.n(r);s.a}});
//# sourceMappingURL=app.1efbe255.js.map